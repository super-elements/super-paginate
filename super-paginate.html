<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../polymer/polymer.html">

<!--
 `<super-paginate>` is used for pagination  .

Example:

    <super-paginate></super-paginate>
 In this we can set the totalRows we want in a page/screen

Example:

    <super-paginate totalRows='3'>
    </super-paginate>

@demo demo/index.html
@hero hero.svg
-->

<dom-module id="super-paginate">
  <template>
    <style>
    </style>
    <table>
    <tfoot>
      <tr>
        <th colspan="5">
          <button class="demo-button" id="superPaginatePrevious">Prev</button>
          <input id="pageCountInput" type="number" min="1"  count="{{count}}" total-row="{{totatRow}}" value="1" required="">
          /{{totalPage}}
          <button class="demo-button" id="superPaginateNext">Next</button>
         </th>
       </tr>
     </tfoot>
   </table>
  </template>

  <script>
    Polymer({
      is: 'super-paginate',
      properties: {
        // It is used to calculate the no of entries in database.
        count: {
          type:String,
          reflectToAttribute: true,
          value: '1',
          observer: '_checkCount'
        },
        // It is used to set the no of rows we want in a page.
        totalRow: {
          type: String,
          value: '',
          reflectToAttribute: true
        },
        // It is used to calculate the totalPages created after getting the values of count and totalRows.
        totalPage: {
          type: String,
          reflectToAttribute: true,
          value: '1' ,
        },
        currentPage: {
          type: String,
          reflectToAttribute: true,
          value: '1'
        }
      },
      _checkCount: function () {
        var self = this;
        if(self.totalPage !== '' || self.totalPage !== undefined || self.totalPage !== null) {
          var pageno;
          pageno = self.count/self.totalRow;
          self.totalPage = Math.round(pageno);
          self.fire('pagecount', { });
        }
      },

      ready: function() {
        var self = this;
        self.$.superPaginatePrevious.addEventListener('click', function(e) {
        self.fire('previous', { });
        var value1 = self.$.pageCountInput;
        self.currentPage = value1.value;
        if(self.currentPage> 1){
        self.currentPage= self.currentPage - 1
        value1.value = self.currentPage
      }
     });
    self.$.superPaginateNext.addEventListener('click', function(e) {
      self.fire('next', { });
      var value2 = self.$.pageCountInput;
      self.currentPage = parseInt(value2.value);
      if(self.currentPage < self.totalPage) {
        self.currentPage  = self.currentPage + 1;
        value2.value = self.currentPage;
      }
    });
  },
  // attached: function() {
  // },
  // detached: function() {
  // },
});
</script>
</dom-module>
